# MapEditor Improvements

Цей документ описує покращення, які були додані до MapEditor для проекту ChainedDecos.

## Додані функції

### 1. Система Undo/Redo
- **Файли**: `UndoRedo.h`, `UndoRedo.cpp`
- **Функції**:
  - Відміна останніх операцій (Ctrl+Z)
  - Повторення операцій (Ctrl+Y)
  - Підтримка операцій: додавання, видалення, модифікація об'єктів
  - Максимальний розмір стеку: 50 операцій

### 2. Покращена Gizmo система
- **Файли**: `ObjectTransform.h`, `ObjectTransform.cpp`
- **Функції**:
  - Візуальні маніпулятори для трансформації об'єктів
  - Режими: Translate, Rotate, Scale
  - Підтримка ray casting для вибору об'єктів
  - Конвертація координат між світом та екраном

### 3. Копіювання/Вставка об'єктів
- **Файли**: `ClipboardManager.h`, `ClipboardManager.cpp`
- **Функції**:
  - Копіювання об'єктів (Ctrl+C)
  - Вставка об'єктів (Ctrl+V)
  - Дублювання об'єктів
  - Автоматичне зміщення при вставці

### 4. Система груп/слоїв
- **Файли**: `LayerManager.h`, `LayerManager.cpp`
- **Функції**:
  - Створення та видалення шарів
  - Призначення об'єктів до шарів
  - Контроль видимості та блокування шарів
  - Кольорове кодування шарів
  - Серіалізація шарів у JSON

### 5. Покращена файлова система
- **Файли**: `JsonMapFileManager.h`, `JsonMapFileManager.cpp`
- **Функції**:
  - Збереження карт у JSON форматі
  - Метадані карт (версія, автор, дата створення)
  - Експорт до OBJ формату
  - Система резервних копій
  - Валідація файлів карт

### 6. Система швидких клавіш
- **Файли**: `ShortcutManager.h`, `ShortcutManager.cpp`
- **Функції**:
  - Налаштування користувацьких швидких клавіш
  - Категорії: File, Edit, View, Object, Tools, Layers, Help
  - Конфлікт-детекція
  - Збереження/завантаження конфігурацій
  - Стандартні швидкі клавіші

### 7. Система фільтрації та пошуку
- **Файли**: `ObjectFilter.h`, `ObjectFilter.cpp`
- **Функції**:
  - Пошук об'єктів за іменем, типом, моделлю
  - Фільтрація за властивостями
  - Рейтинг релевантності результатів
  - Збереження пресетів фільтрів
  - Розширені критерії пошуку

### 8. Покращений UI
- **Файли**: `StatusBar.h`, `StatusBar.cpp`
- **Функції**:
  - Статус бар з інформацією про стан
  - Інформаційна панель
  - Прогрес бари
  - Кнопки та перемикачі
  - Випадаючі меню

## Швидкі клавіші

### Файлові операції
- `Ctrl+N` - Нова карта
- `Ctrl+O` - Відкрити карту
- `Ctrl+S` - Зберегти карту

### Редагування
- `Ctrl+Z` - Відміна
- `Ctrl+Y` - Повторення
- `Ctrl+C` - Копіювати
- `Ctrl+V` - Вставити
- `Delete` - Видалити

### Інструменти
- `1` - Інструмент вибору
- `2` - Інструмент переміщення
- `3` - Інструмент повороту
- `4` - Інструмент масштабування

### Об'єкти
- `Q` - Додати куб
- `W` - Додати сферу
- `E` - Додати циліндр

### Інтерфейс
- `Shift+2` - Перемкнути панель об'єктів
- `F` - Перемкнути панель властивостей

## Структура файлів

```
src/Game/MapEditor/
├── Editor/
│   ├── UndoRedo.h/cpp          # Система відміни/повторення
│   ├── ClipboardManager.h/cpp  # Копіювання/вставка
│   ├── LayerManager.h/cpp      # Управління шарами
│   ├── ShortcutManager.h/cpp   # Швидкі клавіші
│   ├── ObjectFilter.h/cpp      # Фільтрація та пошук
│   ├── StatusBar.h/cpp         # Статус бар
│   ├── EnhancedEditor.h        # Покращений редактор
│   └── ObjectTransform.h/cpp   # Gizmo система
├── MapFileManager/
│   ├── MapFileManager.h/cpp    # Базова файлова система
│   └── JsonMapFileManager.h/cpp # JSON файлова система
└── CMakeLists.txt              # Оновлений build файл
```

## Інтеграція

Для використання покращень в існуючому коді:

1. Замініть `Editor` на `EnhancedEditor` в `Application.cpp`
2. Додайте ініціалізацію нових систем у конструктор
3. Оновіть обробку вводу для підтримки швидких клавіш
4. Додайте рендеринг нових UI панелей

## Майбутні покращення

- Повна інтеграція всіх систем у EnhancedEditor
- Покращення Gizmo інтерактивності
- Додавання анімацій та ефектів
- Підтримка плагінів
- Експорт до різних форматів
- Система шаблонів об'єктів
- Автозбереження
- Система коментарів та нотаток

## Примітки

- Всі нові файли використовують сучасний C++20
- Додано базову обробку помилок
- Код структурований для легкого розширення
- Підтримується модульна архітектура
